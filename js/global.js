customElements.get("scroll-tracker")||customElements.define("scroll-tracker",class extends HTMLElement{constructor(){super()}connectedCallback(){this._updateScroll=this._updateScroll.bind(this),this.callbacks=[],this.lastTs=0,this.lastScrollY=0,this.rafRef=requestAnimationFrame(this._updateScroll),window.scrollTracker=this}addListener(cb){this.callbacks.push(cb)}removeListener(cb){this.callbacks.splice(this.callbacks.findIndex(icb=>cb===icb),1)}trackElementInView(element,callback,options={effectInViewOnly:!0,inViewMargin:[0,0,0,0]}){let lastInView=!1;const updateElementRect=scrollData=>{const{effectInViewOnly,inViewMargin:[mTop,mRight,mBottom,mLeft]=[0,0,0,0]}=options;if(!element)return;const data=element.getBoundingClientRect();data.middle=data.top+data.height/2,data.viewMiddle=data.middle-window.innerHeight/2,data.viewMiddleTop=data.top-window.innerHeight/2,data.inView=data.top+data.height+mTop>0&&data.top+mBottom<window.innerHeight,data.isLeaving=lastInView&&!data.inView,data.isEntering=!lastInView&&data.inView,(!effectInViewOnly||effectInViewOnly&&data.inView||data.isLeaving)&&callback(data,scrollData),lastInView=data.inView};this.trackScroll(updateElementRect)}trackScroll(callback){this.addListener(callback)}_updateScroll(time){const elapsedMs=time-this.lastTs;if(elapsedMs>=16){const curScrollY=window.scrollY,trackingData={dScroll:this.lastScrollY-curScrollY,scrollY,lastScrollY:this.lastScrollY,elapsedMs,time};this.callbacks.forEach(cb=>cb(trackingData)),this.lastScrollY=curScrollY,this.lastTs=time}this.rafRef=requestAnimationFrame(this._updateScroll)}}),customElements.get("ani-scroll-view")||customElements.define("ani-scroll-view",class extends HTMLElement{constructor(){super(),this._trackInView=this._trackInView.bind(this)}connectedCallback(){this.classList.add("ani"),this._triggered=!1,this._autoStagger(),window.scrollTracker.trackElementInView(this,this._trackInView)}_autoStagger(){this.querySelectorAll(".ani").forEach((el,i)=>{i>0&&el.style.setProperty("--ani-delay",`${i*100}ms`)})}_trackInView(data){const isInView=data.viewMiddle<=window.innerHeight/3;!this._triggered&&isInView&&(this.classList.add("ani--play"),this._triggered=!0)}}),customElements.get("site-header")||customElements.define("site-header",class extends HTMLElement{constructor(){super()}connectedCallback(){this.navIcon=this.querySelector(".nav-icon"),this.nav=this.querySelector(".site-header__nav-group"),this.header=this.querySelector(".site-header"),this.searchDisclosure=this.querySelector(".site-header__search > details"),this._listen()}_listen(){this.navIcon&&this.navIcon.addEventListener("click",()=>{document.body.classList.toggle("nav-open"),this.navIcon.classList.toggle("close"),this.nav.classList.toggle("open"),this.header.classList.toggle("open")}),this.searchDisclosure&&this.searchDisclosure.addEventListener("toggle",()=>{this.searchDisclosure.open?(this.header.classList.add("site-header--search-open"),setTimeout(()=>{this.searchDisclosure.querySelector("input").focus()},250)):(setTimeout(()=>{this.header.classList.remove("site-header--search-open")},500),this.navIcon.focus())})}});
//# sourceMappingURL=/cdn/shop/t/27/assets/global.js.map?v=98928748063548724461746453147
