if(!customElements.get("ona-slider")){class FlickingWheelSlide{set horizontal(value){this._horizontal=value}get horizontal(){return this._horizontal}constructor(horizontal=!1){this._handleWheel=this._handleWheel.bind(this),this._flicking=null,this._horizontal=horizontal,this._lastTime=performance.now(),this._velocity=0,this._inertiaAnim=null,this._inertiaTimeout=null,this._friction=.95,this._threshold=.1}init(flicking){this._flicking&&this.destroy(),this._flicking=flicking,this._el=flicking.element,this._el.addEventListener("wheel",this._handleWheel,{passive:!1})}startInertia(initialVelocity){let currentVelocity=initialVelocity;const animate=()=>{currentVelocity*=this._friction;const cameraPos=this._flicking.camera.position;this._flicking.control.controller.axes.setTo({flick:cameraPos+currentVelocity},0),Math.abs(currentVelocity)>this._threshold?this._inertiaAnim=requestAnimationFrame(animate):this._inertiaAnim=null};animate()}_handleWheel(e){const cameraPos=this._flicking.camera.position,scrollDelta=this._horizontal?e.deltaX:e.deltaY,now=performance.now(),deltaTime=now-this._lastTime;this._lastTime=now,this._velocity=scrollDelta/deltaTime,this._flicking.control.controller.axes.setTo({flick:cameraPos+scrollDelta/2},0),this._inertiaAnim&&(cancelAnimationFrame(this._inertiaAnim),this._inertiaAnim=null),clearTimeout(this._inertiaTimeout),this._inertiaTimeout=setTimeout(()=>{this.startInertia(this._velocity)},50)}destroy(){this._flicking&&(this._flicking=null,this._el.removeEventListener("wheel",this._handleWheel))}}customElements.define("ona-slider",class extends HTMLElement{constructor(){super()}connectedCallback(){if(this.elements={viewport:this.querySelector(".slider__viewport"),items:this.querySelector(".slider__items"),prevButton:this.querySelector(".slider__button--prev"),nextButton:this.querySelector(".slider__button--next"),dots:this.querySelector(".slider__dots")},this.prev=this.prev.bind(this),this.next=this.next.bind(this),this._updateDots=this._updateDots.bind(this),this._updateArrows=this._updateArrows.bind(this),this.align=this.getAttribute("align")||"center",this.mobileAlign=this.getAttribute("mobile-align")||"center",this.isVertical=this.getAttribute("vertical")!==null,this.isBound=this.getAttribute("bound")!==null,!this.elements.viewport||!this.elements.items){console.error("Slider: Required elements not found.");return}this.elements.viewport.classList.add("flicking-viewport"),this.elements.items.classList.add("flicking-camera"),this.isVertical&&this.elements.viewport.classList.add("vertical"),this.align[0]==="{"&&(this.align=JSON.parse(this.align)),this.mobileAlign[0]==="{"&&(this.mobileAlign=JSON.parse(this.mobileAlign));const isMobile=window.innerWidth<=768,deviceAlign=isMobile?this.mobileAlign:this.align,deviceBound=isMobile?!1:this.isBound;this.flicking=new Flicking(this.elements.viewport,{align:deviceAlign,horizontal:!this.isVertical,bound:deviceBound}),this.flicking.addPlugins(new FlickingWheelSlide(!0)),this.elements.prevButton&&this.elements.prevButton.addEventListener("click",this.prev),this.elements.nextButton&&this.elements.nextButton.addEventListener("click",this.next),this.elements.dots&&(this.flicking.on("willChange",this._updateDots),this.flicking.on("changed",this._updateDots)),this.flicking.on("ready",this._updateArrows),this.flicking.on("visibleChange",this._updateArrows),this.flicking.on("changed",()=>{this.dispatchEvent(new CustomEvent("slideChanged",{detail:{index:this.flicking.index,currentSlide:this.flicking.currentPanel}}))})}prev(){this.flicking.index>0&&this.flicking.prev()}next(){this.flicking.index<this.flicking.panelCount-1&&this.flicking.next()}moveTo(index){this.flicking.animating?this.flicking.updateAnimation(index,this.flicking.duration):this.flicking.moveTo(index)}_updateDots(event){this.elements.dots.querySelectorAll(".slider__dot").forEach(dot=>{dot.ariaSelected=!1}),this.elements.dots.querySelector(`.slider__dot:nth-child(${event.index+1})`).ariaSelected=!0}_updateArrows(){var _a;if(!((_a=this.flicking.visiblePanels)!=null&&_a.length))return;const isFirstPanelVisible=this.flicking.visiblePanels[0].index===0&&this.flicking.visiblePanels[0].visibleRatio===1,isLastPanelVisible=this.flicking.visiblePanels.at(-1).index===this.flicking.panelCount-1&&this.flicking.visiblePanels.at(-1).visibleRatio===1;this.elements.prevButton&&(this.elements.prevButton.disabled=isFirstPanelVisible),this.elements.nextButton&&(this.elements.nextButton.disabled=isLastPanelVisible),this.elements.prevButton&&this.elements.nextButton&&(isFirstPanelVisible&&isLastPanelVisible?(this.elements.prevButton.style.display="none",this.elements.nextButton.style.display="none"):(this.elements.prevButton.style.display="",this.elements.nextButton.style.display=""))}})}
//# sourceMappingURL=/cdn/shop/t/27/assets/element-ona-slider.js.map?v=52132791527561014161746453147
